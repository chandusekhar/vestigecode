@using WSS.InternalApplication.Models
@model DocumentListViewModel
<section id="document-details">
    <div class="container">
        <div class="row">
            <div class="col-sm-4 col-md-3 col-lg-2 col-md-offset-1 col-lg-offset-2">
                <b>Customer Name:</b>
            </div>
            <div class="col-sm-8 col-md-7 col-lg-6">
                <b>@Model.MainCustomerName &nbsp;</b>
            </div>
        </div>
        <div class="row">
            @*blank row*@
            &nbsp;
        </div>
        <div class="row">
            <div class="col-sm-4 col-md-3 col-lg-2 col-md-offset-1 col-lg-offset-2">
                <b>Intercept Code:</b>
            </div>
            <div class="col-sm-8 col-md-7 col-lg-6">
                <b>@Model.InterceptCode &nbsp;</b>
            </div>
        </div>
        <div class="row">
            @*blank row*@
            &nbsp;
        </div>
        <div class="row">
            <div class="col-sm-4 col-md-3 col-lg-2 col-md-offset-1 col-lg-offset-2">
                <b>Account Number:</b>
            </div>
            <div class="col-sm-8 col-md-7 col-lg-6">
                <b>@Model.ccbAccountNumber &nbsp;</b>
            </div>
        </div>
        <div class="row">
            @*blank row*@
            &nbsp;
        </div>
        <div class="row">
            <div class="col-sm-4 col-md-3 col-lg-2 col-md-offset-1 col-lg-offset-2">
                <b>Date Issued:</b>
            </div>
            <div class="col-sm-8 col-md-7 col-lg-6">
                <b>@Model.DocumentDate.ToString("MMM dd, yyyy") &nbsp;</b>
            </div>
        </div>

        <div class="row">
            @*blank row*@
            &nbsp;
        </div>
        <div class="row">
            <div class="col-sm-4 col-md-3 col-lg-2 col-md-offset-1 col-lg-offset-2">
                <a href="@Url.Action("GetDocumentDetailFile", "DocumentDetails", new {id = @Model.DocumentHeaderId})" style="cursor: pointer;"><b>View Document</b></a>
            </div>
        </div>
    </div>

    @*<div class="row">
        @if (Model.Status == "Held")
            {
            <div class="col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
                <div class="page-header">
                    Document ID : @Model.DocumentHeaderId
                    <button type="button" name="ActionButton" class="btn btn-primary actionbtn" value="Approved" title="Action Button"> &nbsp;Approve &nbsp;</button>
                </div>
                <div class="page-header">
                    Document ID : @Model.DocumentHeaderId
                    <button type="button" name="ActionButton" class="btn btn-primary actionbtn" value="Rejected" title="Action Button"> &nbsp;Reject  &nbsp;</button>
                </div>
            </div>
        }
        @if (Model.Status == "Published" || Model.Status == "Rejected")
            {
            <div class="col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
                <div class="page-header">
                    Document ID : @Model.DocumentHeaderId
                    <button type="button" name="ActionButton" class="btn btn-primary actionbtn" value="Held" title="Action Button"> &nbsp;Held &nbsp;</button>
                </div>
            </div>
        }
        @if (Model.Status == "Released")
            {
            <div class="col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
                <div class="page-header">
                    Document ID : @Model.DocumentHeaderId
                    <button type="button" name="ActionButton" class="btn btn-primary actionbtn" value="Removed" title="Action Button"> &nbsp;Remove &nbsp;</button>
                </div>
            </div>
        }
    </div>*@



@*<div class="container">
        @if (Model != null)
            {
                <table class="table table-hover table-striped">
                    <thead>
                        <tr class="document-history-table">
                            <th class="event-type" title="Sort by ProcessedDate" style="width: 150px; min-width: 100px" data-sortorder="EventType" data-sortdir="Change" data-page="@ViewBag.PageNumber" data-pagesize="@ViewBag.PageSize">
                                <a href='javascript:void(0);' onclick='SortAuditRecords("@Url.Action("Index", new {sortOrder = "ProcessedDate", sortDir = "Change", id =  @Model[0].DocumentHeaderId})"); return false;'>
                                    @Html.DisplayNameFor(x => x.FirstOrDefault().ProcessedDate) <i class="@ViewBag.ProcessedDate"></i>
                                </a>
                            </th>
                            <th class="date" title="Sort by ProcessedBy" data-sortorder="ProcessedBy" data-sortdir="Change" style="width: 200px; min-width: 100px" data-page="@ViewBag.PageNumber" data-pagesize="@ViewBag.PageSize">
                                <a href='javascript:void(0);' onclick='SortAuditRecords("@Url.Action("Index", new {sortOrder = "ProcessedBy", sortDir = "Change", id =  @Model[0].DocumentHeaderId})"); return false;'>
                                    @Html.DisplayNameFor(x => x.FirstOrDefault().ProcessedBy) <i class="@ViewBag.ProcessedBy"></i>
                                </a>
                            </th>
                            <th class="user-id" title="Sort by Status" data-sortorder="UserId" data-sortdir="Change" style=" width 150px; min-width 100px" data-page="@ViewBag.PageNumber" data-pagesize="@ViewBag.PageSize">
                                <a href='javascript:void(0);' onclick='SortAuditRecords("@Url.Action("Index", new {sortOrder = "Status", sortDir = "Change", id =  @Model[0].DocumentHeaderId})"); return false;'>
                                    @Html.DisplayNameFor(x => x.FirstOrDefault().Status) <i class="@ViewBag.Status"></i>
                                </a>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td hidden="hidden">@item.id</td>
                                <td class="Processed-Date">@item.ProcessedDate</td>
                                <td class="Processed-by">@item.ProcessedBy</td>
                                <td class="Status">@item.Status</td>
                            </tr>

                        }
                    </tbody>
                </table>
            }
    </div>*@

    <div class="col-sm-6 col-md-5 col-lg-4 col-md-offset-1 col-lg-offset-2 ">
        <a href=@Url.Action("Index", "DocumentSearch")><i title="Back to List" class="pull-left fa fa-reply"></i> Back to Search</a>
    </div>
</section>



@section Scripts {
    <script type="text/javascript">
        $(document)
            .ready(function ($) {
                $(".actionbtn").btsConfirmButton({ msg: "&nbsp;&nbsp;Click again to confirm" }, function (e) {
                    var btnValue = this.val();
                    var id = @(Model.DocumentHeaderId);
                    //   var comment=x.comment ;
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("UpdateStatus", "DocumentDetails")',
                        data: {
                            Id: id, 
                            updatedstatus: btnValue
                        },
                        success: function(data) {
                            if (data.IsUpdated == true) {
                                showNotification("updated successfylly", "Success!", "Success");
                            }
                            else
                                showNotification("There is an error occured while updating", "Error!", "Error");
                        },
                        error: function(data) {
                            debugger;
                        }
                    });
                });
            });
    </script>
}
